"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/process/route";
exports.ids = ["app/api/process/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "node:assert":
/*!******************************!*\
  !*** external "node:assert" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:assert");

/***/ }),

/***/ "node:async_hooks":
/*!***********************************!*\
  !*** external "node:async_hooks" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("node:async_hooks");

/***/ }),

/***/ "node:buffer":
/*!******************************!*\
  !*** external "node:buffer" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:buffer");

/***/ }),

/***/ "node:console":
/*!*******************************!*\
  !*** external "node:console" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("node:console");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "node:diagnostics_channel":
/*!*******************************************!*\
  !*** external "node:diagnostics_channel" ***!
  \*******************************************/
/***/ ((module) => {

module.exports = require("node:diagnostics_channel");

/***/ }),

/***/ "node:dns":
/*!***************************!*\
  !*** external "node:dns" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("node:dns");

/***/ }),

/***/ "node:events":
/*!******************************!*\
  !*** external "node:events" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:events");

/***/ }),

/***/ "node:http":
/*!****************************!*\
  !*** external "node:http" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:http");

/***/ }),

/***/ "node:http2":
/*!*****************************!*\
  !*** external "node:http2" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("node:http2");

/***/ }),

/***/ "node:net":
/*!***************************!*\
  !*** external "node:net" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("node:net");

/***/ }),

/***/ "node:perf_hooks":
/*!**********************************!*\
  !*** external "node:perf_hooks" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:perf_hooks");

/***/ }),

/***/ "node:querystring":
/*!***********************************!*\
  !*** external "node:querystring" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("node:querystring");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:tls":
/*!***************************!*\
  !*** external "node:tls" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("node:tls");

/***/ }),

/***/ "node:url":
/*!***************************!*\
  !*** external "node:url" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("node:url");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:util");

/***/ }),

/***/ "node:util/types":
/*!**********************************!*\
  !*** external "node:util/types" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:util/types");

/***/ }),

/***/ "node:worker_threads":
/*!**************************************!*\
  !*** external "node:worker_threads" ***!
  \**************************************/
/***/ ((module) => {

module.exports = require("node:worker_threads");

/***/ }),

/***/ "node:zlib":
/*!****************************!*\
  !*** external "node:zlib" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:zlib");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("string_decoder");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprocess%2Froute&page=%2Fapi%2Fprocess%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprocess%2Froute.ts&appDir=%2FUsers%2Famylixing%2FDocuments%2FGitHub%2FBento%20Grid%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Famylixing%2FDocuments%2FGitHub%2FBento%20Grid&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprocess%2Froute&page=%2Fapi%2Fprocess%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprocess%2Froute.ts&appDir=%2FUsers%2Famylixing%2FDocuments%2FGitHub%2FBento%20Grid%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Famylixing%2FDocuments%2FGitHub%2FBento%20Grid&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_amylixing_Documents_GitHub_Bento_Grid_src_app_api_process_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/process/route.ts */ \"(rsc)/./src/app/api/process/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/process/route\",\n        pathname: \"/api/process\",\n        filename: \"route\",\n        bundlePath: \"app/api/process/route\"\n    },\n    resolvedPagePath: \"/Users/amylixing/Documents/GitHub/Bento Grid/src/app/api/process/route.ts\",\n    nextConfigOutput,\n    userland: _Users_amylixing_Documents_GitHub_Bento_Grid_src_app_api_process_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/process/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwcm9jZXNzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZwcm9jZXNzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGcHJvY2VzcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmFteWxpeGluZyUyRkRvY3VtZW50cyUyRkdpdEh1YiUyRkJlbnRvJTIwR3JpZCUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZhbXlsaXhpbmclMkZEb2N1bWVudHMlMkZHaXRIdWIlMkZCZW50byUyMEdyaWQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDeUI7QUFDdEc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUM2Sjs7QUFFN0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iZW50by1ncmlkLWdlbmVyYXRvci8/NmIxZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvYW15bGl4aW5nL0RvY3VtZW50cy9HaXRIdWIvQmVudG8gR3JpZC9zcmMvYXBwL2FwaS9wcm9jZXNzL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9wcm9jZXNzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcHJvY2Vzc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvcHJvY2Vzcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9hbXlsaXhpbmcvRG9jdW1lbnRzL0dpdEh1Yi9CZW50byBHcmlkL3NyYy9hcHAvYXBpL3Byb2Nlc3Mvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvcHJvY2Vzcy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprocess%2Froute&page=%2Fapi%2Fprocess%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprocess%2Froute.ts&appDir=%2FUsers%2Famylixing%2FDocuments%2FGitHub%2FBento%20Grid%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Famylixing%2FDocuments%2FGitHub%2FBento%20Grid&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/process/route.ts":
/*!**************************************!*\
  !*** ./src/app/api/process/route.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var cheerio__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! cheerio */ \"(rsc)/./node_modules/cheerio/dist/esm/index.js\");\n\n\nasync function extractWechatContent(url) {\n    try {\n        const response = await fetch(url, {\n            headers: {\n                \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36\"\n            }\n        });\n        if (!response.ok) {\n            throw new Error(\"无法获取微信文章内容\");\n        }\n        const html = await response.text();\n        const $ = cheerio__WEBPACK_IMPORTED_MODULE_1__.load(html);\n        // 提取标题\n        const title = $(\"h1.rich_media_title\").text().trim();\n        // 提取作者\n        const author = $(\"strong.rich_media_meta_text\").first().text().trim();\n        // 提取正文内容\n        const content = $(\"div.rich_media_content\").text().replace(/\\s+/g, \" \").trim();\n        console.log(\"微信正文内容：\", content);\n        return {\n            title,\n            author,\n            content: `${title}\\n\\n作者：${author}\\n\\n${content}`,\n            rawContent: content\n        };\n    } catch (error) {\n        console.error(\"Error extracting WeChat content:\", error);\n        throw new Error(\"无法解析微信文章内容\");\n    }\n}\nasync function callKimiAPI(content, systemPrompt) {\n    let limitedContent = content.length > 3000 ? content.slice(0, 3000) : content;\n    const response = await fetch(\"https://api.moonshot.cn/v1/chat/completions\", {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n            \"Authorization\": `Bearer ${process.env.KIMI_API_KEY}`\n        },\n        body: JSON.stringify({\n            model: \"moonshot-v1-8k\",\n            messages: [\n                {\n                    role: \"system\",\n                    content: systemPrompt\n                },\n                {\n                    role: \"user\",\n                    content: limitedContent\n                }\n            ],\n            temperature: 0\n        })\n    });\n    if (!response.ok) {\n        const errorText = await response.text();\n        console.error(\"Kimi API 错误响应:\", errorText);\n        throw new Error(\"Kimi API 调用失败: \" + errorText.slice(0, 200));\n    }\n    try {\n        const data = await response.json();\n        return data.choices[0].message.content;\n    } catch (e) {\n        const errorText = await response.text();\n        console.error(\"Kimi API 返回非 JSON:\", errorText);\n        throw new Error(\"Kimi API 返回非 JSON: \" + errorText.slice(0, 200));\n    }\n}\nasync function retryWithBackoff(fn, retries = 3, delay = 1000) {\n    try {\n        return await fn();\n    } catch (error) {\n        if (retries === 0) throw error;\n        await new Promise((resolve)=>setTimeout(resolve, delay));\n        return retryWithBackoff(fn, retries - 1, delay * 2);\n    }\n}\n// 新增：通用网页<title>抓取\nasync function extractPageTitle(url) {\n    try {\n        const response = await fetch(url, {\n            headers: {\n                \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36\"\n            }\n        });\n        if (!response.ok) return null;\n        const html = await response.text();\n        const match = html.match(/<title>(.*?)<\\/title>/i);\n        if (match && match[1]) {\n            return match[1].trim();\n        }\n        return null;\n    } catch  {\n        return null;\n    }\n}\nasync function POST(request) {\n    try {\n        const { content, isUrl } = await request.json();\n        if (!content) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"内容不能为空\"\n            }, {\n                status: 400\n            });\n        }\n        if (!process.env.KIMI_API_KEY) {\n            console.error(\"Kimi API key is not set\");\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Kimi API 密钥未设置\"\n            }, {\n                status: 500\n            });\n        }\n        let processedContent = content;\n        let title = \"\";\n        let author = \"\";\n        let rawContent = \"\";\n        // 如果是微信文章链接，先提取内容\n        if (isUrl && content.includes(\"mp.weixin.qq.com\")) {\n            try {\n                const extracted = await extractWechatContent(content);\n                processedContent = extracted.content;\n                title = extracted.title;\n                author = extracted.author;\n                rawContent = extracted.rawContent;\n            } catch (error) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    error: \"无法获取微信文章内容，请确保链接有效且可访问\"\n                }, {\n                    status: 400\n                });\n            }\n        }\n        // AI prompt 统一为内容摘要与结构化卡片专家\n        const systemPrompt = `你是内容摘要与结构化卡片专家。请将用户输入的内容进行结构化分区，提炼要点，生成摘要和标签，适合以\"Bento Grid\"卡片形式展示。要求：\\n\\n- title：高度概括内容主旨，10-16字\\n- summary：一句话总结内容亮点\\n- sections：每区3-5条关键信息，内容精炼有力，禁止长段落/代码/无关内容\\n- tags：3-8个关键词，适合胶囊标签展示\\n- 只返回如下JSON，不要多余解释：\\n{\\n  \"title\": \"\",\\n  \"summary\": \"\",\\n  \"sections\": [{\"title\": \"\", \"items\": [{\"label\": \"\", \"value\": \"\"}]}],\\n  \"tags\": []\\n}`;\n        // 使用重试机制调用 Kimi API\n        const completion = await retryWithBackoff(async ()=>{\n            try {\n                return await callKimiAPI(processedContent, systemPrompt);\n            } catch (error) {\n                console.error(\"Kimi API 调用失败:\", error);\n                if (error.code === \"ETIMEDOUT\") {\n                    throw new Error(\"连接超时，请检查网络连接\");\n                }\n                throw error;\n            }\n        });\n        // 直接解析 Kimi 返回的 JSON 内容，先做容错处理\n        let fixed = completion.replace(/\"/g, '\"').replace(/\"/g, '\"');\n        let result = {};\n        try {\n            result = JSON.parse(fixed);\n        } catch (e) {\n            console.error(\"Kimi 返回内容依然无法解析为 JSON:\", fixed);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Kimi 返回内容依然无法解析为 JSON\",\n                raw: fixed\n            }, {\n                status: 500\n            });\n        }\n        // 合并微信作者、原始正文内容\n        result.author = author;\n        result.content = processedContent;\n        result.rawContent = rawContent;\n        // 自动精简美化 title/subtitle/coreNumbers/sections/cta\n        if (result.title && result.title.length > 20) result.title = result.title.slice(0, 20) + \"...\";\n        if (result.subtitle && result.subtitle.length > 40) result.subtitle = result.subtitle.slice(0, 40) + \"...\";\n        if (Array.isArray(result.coreNumbers)) {\n            result.coreNumbers = result.coreNumbers.map((n)=>({\n                    number: (n.number || \"\").toString().slice(0, 8),\n                    desc: (n.desc || \"\").toString().slice(0, 20)\n                }));\n        }\n        if (Array.isArray(result.sections)) {\n            result.sections = result.sections.map((section)=>{\n                const newSection = {\n                    ...section\n                };\n                if (Array.isArray(newSection.items)) {\n                    newSection.items = newSection.items.map((item)=>{\n                        let label = item.label || \"\";\n                        let value = item.value || \"\";\n                        if (label.length > 20) label = label.slice(0, 20) + \"...\";\n                        if (value.length > 20) value = value.slice(0, 20) + \"...\";\n                        return {\n                            label,\n                            value\n                        };\n                    });\n                }\n                return newSection;\n            });\n        }\n        if (result.cta && result.cta.length > 30) result.cta = result.cta.slice(0, 30) + \"...\";\n        // 自动识别并拆分 meta 信息\n        const metaKeys = [\n            \"标题\",\n            \"作者\",\n            \"发布平台\",\n            \"平台\",\n            \"发布链接\",\n            \"链接\",\n            \"原文链接\",\n            \"日期\",\n            \"发布时间\"\n        ];\n        let meta = {};\n        if (Array.isArray(result.sections)) {\n            const newSections = [];\n            result.sections.forEach((section)=>{\n                if (section.title && section.title.includes(\"主要观点\")) {\n                    // 每个item单独成卡片\n                    section.items.forEach((item)=>{\n                        newSections.push({\n                            title: item.label,\n                            items: [\n                                {\n                                    label: item.label,\n                                    value: item.value\n                                }\n                            ]\n                        });\n                    });\n                } else {\n                    newSections.push(section);\n                }\n            });\n            result.sections = newSections;\n        }\n        result.meta = meta;\n        // meta.title: 有链接用原文title，普通链接抓<title>，无链接用AI title\n        if (isUrl && content.includes(\"mp.weixin.qq.com\") && title) {\n            result.meta = {\n                ...meta,\n                title,\n                url: content\n            };\n        } else if (isUrl) {\n            const pageTitle = await extractPageTitle(content);\n            result.meta = {\n                ...meta,\n                title: pageTitle || result.title,\n                url: content\n            };\n        } else {\n            result.meta = {\n                ...meta,\n                title: result.title,\n                url: \"\"\n            };\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(result);\n    } catch (error) {\n        console.error(\"Error processing content:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: error.message || \"处理内容时出错\",\n            details: error.cause?.message || error.code || \"未知错误\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O2dCQUFFeEU7Z0JBQU9WLEtBQUtjO1lBQVE7UUFDL0MsT0FBTyxJQUFJdUMsT0FBTztZQUNoQixNQUFNaUMsWUFBWSxNQUFNckMsaUJBQWlCbkM7WUFDekMrQyxPQUFPcUIsSUFBSSxHQUFHO2dCQUFFLEdBQUdBLElBQUk7Z0JBQUV4RSxPQUFPNEUsYUFBYXpCLE9BQU9uRCxLQUFLO2dCQUFFVixLQUFLYztZQUFRO1FBQzFFLE9BQU87WUFDTCtDLE9BQU9xQixJQUFJLEdBQUc7Z0JBQUUsR0FBR0EsSUFBSTtnQkFBRXhFLE9BQU9tRCxPQUFPbkQsS0FBSztnQkFBRVYsS0FBSztZQUFHO1FBQ3hEO1FBRUEsT0FBT0gsa0ZBQVlBLENBQUN5QyxJQUFJLENBQUN1QjtJQUMzQixFQUFFLE9BQU8xQyxPQUFZO1FBQ25CSCxRQUFRRyxLQUFLLENBQUMsNkJBQTZCQTtRQUMzQyxPQUFPdEIsa0ZBQVlBLENBQUN5QyxJQUFJLENBQ3RCO1lBQ0VuQixPQUFPQSxNQUFNcUIsT0FBTyxJQUFJO1lBQ3hCK0MsU0FBU3BFLE1BQU1xRSxLQUFLLEVBQUVoRCxXQUFXckIsTUFBTXdDLElBQUksSUFBSTtRQUNqRCxHQUNBO1lBQUVMLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmVudG8tZ3JpZC1nZW5lcmF0b3IvLi9zcmMvYXBwL2FwaS9wcm9jZXNzL3JvdXRlLnRzPzZhZjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0ICogYXMgY2hlZXJpbyBmcm9tICdjaGVlcmlvJztcblxuaW50ZXJmYWNlIERlZXBTZWVrUmVzcG9uc2Uge1xuICBjaG9pY2VzOiBBcnJheTx7XG4gICAgbWVzc2FnZToge1xuICAgICAgY29udGVudDogc3RyaW5nO1xuICAgIH07XG4gIH0+O1xufVxuXG5hc3luYyBmdW5jdGlvbiBleHRyYWN0V2VjaGF0Q29udGVudCh1cmw6IHN0cmluZykge1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdVc2VyLUFnZW50JzogJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS85MS4wLjQ0NzIuMTI0IFNhZmFyaS81MzcuMzYnXG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCfml6Dms5Xojrflj5blvq7kv6Hmlofnq6DlhoXlrrknKTtcbiAgICB9XG5cbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgIGNvbnN0ICQgPSBjaGVlcmlvLmxvYWQoaHRtbCk7XG4gICAgXG4gICAgLy8g5o+Q5Y+W5qCH6aKYXG4gICAgY29uc3QgdGl0bGUgPSAkKCdoMS5yaWNoX21lZGlhX3RpdGxlJykudGV4dCgpLnRyaW0oKTtcbiAgICBcbiAgICAvLyDmj5Dlj5bkvZzogIVcbiAgICBjb25zdCBhdXRob3IgPSAkKCdzdHJvbmcucmljaF9tZWRpYV9tZXRhX3RleHQnKS5maXJzdCgpLnRleHQoKS50cmltKCk7XG4gICAgXG4gICAgLy8g5o+Q5Y+W5q2j5paH5YaF5a65XG4gICAgY29uc3QgY29udGVudCA9ICQoJ2Rpdi5yaWNoX21lZGlhX2NvbnRlbnQnKVxuICAgICAgLnRleHQoKVxuICAgICAgLnJlcGxhY2UoL1xccysvZywgJyAnKVxuICAgICAgLnRyaW0oKTtcblxuICAgIGNvbnNvbGUubG9nKCflvq7kv6HmraPmloflhoXlrrnvvJonLCBjb250ZW50KTtcblxuICAgIHJldHVybiB7XG4gICAgICB0aXRsZSxcbiAgICAgIGF1dGhvcixcbiAgICAgIGNvbnRlbnQ6IGAke3RpdGxlfVxcblxcbuS9nOiAhe+8miR7YXV0aG9yfVxcblxcbiR7Y29udGVudH1gLFxuICAgICAgcmF3Q29udGVudDogY29udGVudFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZXh0cmFjdGluZyBXZUNoYXQgY29udGVudDonLCBlcnJvcik7XG4gICAgdGhyb3cgbmV3IEVycm9yKCfml6Dms5Xop6PmnpDlvq7kv6Hmlofnq6DlhoXlrrknKTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBjYWxsS2ltaUFQSShjb250ZW50OiBzdHJpbmcsIHN5c3RlbVByb21wdDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgbGV0IGxpbWl0ZWRDb250ZW50ID0gY29udGVudC5sZW5ndGggPiAzMDAwID8gY29udGVudC5zbGljZSgwLCAzMDAwKSA6IGNvbnRlbnQ7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLm1vb25zaG90LmNuL3YxL2NoYXQvY29tcGxldGlvbnMnLCB7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgaGVhZGVyczoge1xuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3Byb2Nlc3MuZW52LktJTUlfQVBJX0tFWX1gLFxuICAgIH0sXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgbW9kZWw6ICdtb29uc2hvdC12MS04aycsXG4gICAgICBtZXNzYWdlczogW1xuICAgICAgICB7XG4gICAgICAgICAgcm9sZTogJ3N5c3RlbScsXG4gICAgICAgICAgY29udGVudDogc3lzdGVtUHJvbXB0XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICByb2xlOiAndXNlcicsXG4gICAgICAgICAgY29udGVudDogbGltaXRlZENvbnRlbnRcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIHRlbXBlcmF0dXJlOiAwLFxuICAgIH0pLFxuICB9KTtcblxuICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgY29uc3QgZXJyb3JUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgIGNvbnNvbGUuZXJyb3IoJ0tpbWkgQVBJIOmUmeivr+WTjeW6lDonLCBlcnJvclRleHQpO1xuICAgIHRocm93IG5ldyBFcnJvcignS2ltaSBBUEkg6LCD55So5aSx6LSlOiAnICsgZXJyb3JUZXh0LnNsaWNlKDAsIDIwMCkpO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIHJldHVybiBkYXRhLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50O1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc3QgZXJyb3JUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgIGNvbnNvbGUuZXJyb3IoJ0tpbWkgQVBJIOi/lOWbnumdniBKU09OOicsIGVycm9yVGV4dCk7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdLaW1pIEFQSSDov5Tlm57pnZ4gSlNPTjogJyArIGVycm9yVGV4dC5zbGljZSgwLCAyMDApKTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiByZXRyeVdpdGhCYWNrb2ZmKGZuOiAoKSA9PiBQcm9taXNlPGFueT4sIHJldHJpZXMgPSAzLCBkZWxheSA9IDEwMDApIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgZm4oKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAocmV0cmllcyA9PT0gMCkgdGhyb3cgZXJyb3I7XG4gICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGRlbGF5KSk7XG4gICAgcmV0dXJuIHJldHJ5V2l0aEJhY2tvZmYoZm4sIHJldHJpZXMgLSAxLCBkZWxheSAqIDIpO1xuICB9XG59XG5cbi8vIOaWsOWinu+8mumAmueUqOe9kemhtTx0aXRsZT7mipPlj5ZcbmFzeW5jIGZ1bmN0aW9uIGV4dHJhY3RQYWdlVGl0bGUodXJsOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnVXNlci1BZ2VudCc6ICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvOTEuMC40NDcyLjEyNCBTYWZhcmkvNTM3LjM2J1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmICghcmVzcG9uc2Uub2spIHJldHVybiBudWxsO1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgY29uc3QgbWF0Y2ggPSBodG1sLm1hdGNoKC88dGl0bGU+KC4qPyk8XFwvdGl0bGU+L2kpO1xuICAgIGlmIChtYXRjaCAmJiBtYXRjaFsxXSkge1xuICAgICAgcmV0dXJuIG1hdGNoWzFdLnRyaW0oKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGNvbnRlbnQsIGlzVXJsIH0gPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcblxuICAgIGlmICghY29udGVudCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAn5YaF5a655LiN6IO95Li656m6JyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKCFwcm9jZXNzLmVudi5LSU1JX0FQSV9LRVkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0tpbWkgQVBJIGtleSBpcyBub3Qgc2V0Jyk7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdLaW1pIEFQSSDlr4bpkqXmnKrorr7nva4nIH0sXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBsZXQgcHJvY2Vzc2VkQ29udGVudCA9IGNvbnRlbnQ7XG4gICAgbGV0IHRpdGxlID0gJyc7XG4gICAgbGV0IGF1dGhvciA9ICcnO1xuICAgIGxldCByYXdDb250ZW50ID0gJyc7XG5cbiAgICAvLyDlpoLmnpzmmK/lvq7kv6Hmlofnq6Dpk77mjqXvvIzlhYjmj5Dlj5blhoXlrrlcbiAgICBpZiAoaXNVcmwgJiYgY29udGVudC5pbmNsdWRlcygnbXAud2VpeGluLnFxLmNvbScpKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBleHRyYWN0ZWQgPSBhd2FpdCBleHRyYWN0V2VjaGF0Q29udGVudChjb250ZW50KTtcbiAgICAgICAgcHJvY2Vzc2VkQ29udGVudCA9IGV4dHJhY3RlZC5jb250ZW50O1xuICAgICAgICB0aXRsZSA9IGV4dHJhY3RlZC50aXRsZTtcbiAgICAgICAgYXV0aG9yID0gZXh0cmFjdGVkLmF1dGhvcjtcbiAgICAgICAgcmF3Q29udGVudCA9IGV4dHJhY3RlZC5yYXdDb250ZW50O1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgIHsgZXJyb3I6ICfml6Dms5Xojrflj5blvq7kv6Hmlofnq6DlhoXlrrnvvIzor7fnoa7kv53pk77mjqXmnInmlYjkuJTlj6/orr/pl64nIH0sXG4gICAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQUkgcHJvbXB0IOe7n+S4gOS4uuWGheWuueaRmOimgeS4jue7k+aehOWMluWNoeeJh+S4k+WutlxuICAgIGNvbnN0IHN5c3RlbVByb21wdCA9IGDkvaDmmK/lhoXlrrnmkZjopoHkuI7nu5PmnoTljJbljaHniYfkuJPlrrbjgILor7flsIbnlKjmiLfovpPlhaXnmoTlhoXlrrnov5vooYznu5PmnoTljJbliIbljLrvvIzmj5DngrzopoHngrnvvIznlJ/miJDmkZjopoHlkozmoIfnrb7vvIzpgILlkIjku6VcIkJlbnRvIEdyaWRcIuWNoeeJh+W9ouW8j+WxleekuuOAguimgeaxgu+8mlxcblxcbi0gdGl0bGXvvJrpq5jluqbmpoLmi6zlhoXlrrnkuLvml6jvvIwxMC0xNuWtl1xcbi0gc3VtbWFyee+8muS4gOWPpeivneaAu+e7k+WGheWuueS6rueCuVxcbi0gc2VjdGlvbnPvvJrmr4/ljLozLTXmnaHlhbPplK7kv6Hmga/vvIzlhoXlrrnnsr7ngrzmnInlipvvvIznpoHmraLplb/mrrXokL0v5Luj56CBL+aXoOWFs+WGheWuuVxcbi0gdGFnc++8mjMtOOS4quWFs+mUruivje+8jOmAguWQiOiDtuWbiuagh+etvuWxleekulxcbi0g5Y+q6L+U5Zue5aaC5LiLSlNPTu+8jOS4jeimgeWkmuS9meino+mHiu+8mlxcbntcXG4gIFwidGl0bGVcIjogXCJcIixcXG4gIFwic3VtbWFyeVwiOiBcIlwiLFxcbiAgXCJzZWN0aW9uc1wiOiBbe1widGl0bGVcIjogXCJcIiwgXCJpdGVtc1wiOiBbe1wibGFiZWxcIjogXCJcIiwgXCJ2YWx1ZVwiOiBcIlwifV19XSxcXG4gIFwidGFnc1wiOiBbXVxcbn1gO1xuXG4gICAgLy8g5L2/55So6YeN6K+V5py65Yi26LCD55SoIEtpbWkgQVBJXG4gICAgY29uc3QgY29tcGxldGlvbiA9IGF3YWl0IHJldHJ5V2l0aEJhY2tvZmYoYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGNhbGxLaW1pQVBJKHByb2Nlc3NlZENvbnRlbnQsIHN5c3RlbVByb21wdCk7XG4gICAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0tpbWkgQVBJIOiwg+eUqOWksei0pTonLCBlcnJvcik7XG4gICAgICAgIGlmIChlcnJvci5jb2RlID09PSAnRVRJTUVET1VUJykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcign6L+e5o6l6LaF5pe277yM6K+35qOA5p+l572R57uc6L+e5o6lJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyDnm7TmjqXop6PmnpAgS2ltaSDov5Tlm57nmoQgSlNPTiDlhoXlrrnvvIzlhYjlgZrlrrnplJnlpITnkIZcbiAgICBsZXQgZml4ZWQgPSBjb21wbGV0aW9uXG4gICAgICAucmVwbGFjZSgvXCIvZywgJ1wiJylcbiAgICAgIC5yZXBsYWNlKC9cIi9nLCAnXCInKTtcbiAgICBsZXQgcmVzdWx0OiBhbnkgPSB7fTtcbiAgICB0cnkge1xuICAgICAgcmVzdWx0ID0gSlNPTi5wYXJzZShmaXhlZCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcignS2ltaSDov5Tlm57lhoXlrrnkvp3nhLbml6Dms5Xop6PmnpDkuLogSlNPTjonLCBmaXhlZCk7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdLaW1pIOi/lOWbnuWGheWuueS+neeEtuaXoOazleino+aekOS4uiBKU09OJywgcmF3OiBmaXhlZCB9LFxuICAgICAgICB7IHN0YXR1czogNTAwIH1cbiAgICAgICk7XG4gICAgfVxuICAgIC8vIOWQiOW5tuW+ruS/oeS9nOiAheOAgeWOn+Wni+ato+aWh+WGheWuuVxuICAgIHJlc3VsdC5hdXRob3IgPSBhdXRob3I7XG4gICAgcmVzdWx0LmNvbnRlbnQgPSBwcm9jZXNzZWRDb250ZW50O1xuICAgIHJlc3VsdC5yYXdDb250ZW50ID0gcmF3Q29udGVudDtcblxuICAgIC8vIOiHquWKqOeyvueugOe+juWMliB0aXRsZS9zdWJ0aXRsZS9jb3JlTnVtYmVycy9zZWN0aW9ucy9jdGFcbiAgICBpZiAocmVzdWx0LnRpdGxlICYmIHJlc3VsdC50aXRsZS5sZW5ndGggPiAyMCkgcmVzdWx0LnRpdGxlID0gcmVzdWx0LnRpdGxlLnNsaWNlKDAsIDIwKSArICcuLi4nO1xuICAgIGlmIChyZXN1bHQuc3VidGl0bGUgJiYgcmVzdWx0LnN1YnRpdGxlLmxlbmd0aCA+IDQwKSByZXN1bHQuc3VidGl0bGUgPSByZXN1bHQuc3VidGl0bGUuc2xpY2UoMCwgNDApICsgJy4uLic7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkocmVzdWx0LmNvcmVOdW1iZXJzKSkge1xuICAgICAgcmVzdWx0LmNvcmVOdW1iZXJzID0gcmVzdWx0LmNvcmVOdW1iZXJzLm1hcCgobjogYW55KSA9PiAoe1xuICAgICAgICBudW1iZXI6IChuLm51bWJlciB8fCAnJykudG9TdHJpbmcoKS5zbGljZSgwLCA4KSxcbiAgICAgICAgZGVzYzogKG4uZGVzYyB8fCAnJykudG9TdHJpbmcoKS5zbGljZSgwLCAyMClcbiAgICAgIH0pKTtcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkocmVzdWx0LnNlY3Rpb25zKSkge1xuICAgICAgcmVzdWx0LnNlY3Rpb25zID0gcmVzdWx0LnNlY3Rpb25zLm1hcCgoc2VjdGlvbjogYW55KSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld1NlY3Rpb24gPSB7IC4uLnNlY3Rpb24gfTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobmV3U2VjdGlvbi5pdGVtcykpIHtcbiAgICAgICAgICBuZXdTZWN0aW9uLml0ZW1zID0gbmV3U2VjdGlvbi5pdGVtcy5tYXAoKGl0ZW06IGFueSkgPT4ge1xuICAgICAgICAgICAgbGV0IGxhYmVsID0gaXRlbS5sYWJlbCB8fCAnJztcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9IGl0ZW0udmFsdWUgfHwgJyc7XG4gICAgICAgICAgICBpZiAobGFiZWwubGVuZ3RoID4gMjApIGxhYmVsID0gbGFiZWwuc2xpY2UoMCwgMjApICsgJy4uLic7XG4gICAgICAgICAgICBpZiAodmFsdWUubGVuZ3RoID4gMjApIHZhbHVlID0gdmFsdWUuc2xpY2UoMCwgMjApICsgJy4uLic7XG4gICAgICAgICAgICByZXR1cm4geyBsYWJlbCwgdmFsdWUgfTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3U2VjdGlvbjtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAocmVzdWx0LmN0YSAmJiByZXN1bHQuY3RhLmxlbmd0aCA+IDMwKSByZXN1bHQuY3RhID0gcmVzdWx0LmN0YS5zbGljZSgwLCAzMCkgKyAnLi4uJztcblxuICAgIC8vIOiHquWKqOivhuWIq+W5tuaLhuWIhiBtZXRhIOS/oeaBr1xuICAgIGNvbnN0IG1ldGFLZXlzID0gWyfmoIfpopgnLCAn5L2c6ICFJywgJ+WPkeW4g+W5s+WPsCcsICflubPlj7AnLCAn5Y+R5biD6ZO+5o6lJywgJ+mTvuaOpScsICfljp/mlofpk77mjqUnLCAn5pel5pyfJywgJ+WPkeW4g+aXtumXtCddO1xuICAgIGxldCBtZXRhOiBhbnkgPSB7fTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShyZXN1bHQuc2VjdGlvbnMpKSB7XG4gICAgICBjb25zdCBuZXdTZWN0aW9uczogYW55W10gPSBbXTtcbiAgICAgIHJlc3VsdC5zZWN0aW9ucy5mb3JFYWNoKChzZWN0aW9uOiBhbnkpID0+IHtcbiAgICAgICAgaWYgKHNlY3Rpb24udGl0bGUgJiYgc2VjdGlvbi50aXRsZS5pbmNsdWRlcygn5Li76KaB6KeC54K5JykpIHtcbiAgICAgICAgICAvLyDmr4/kuKppdGVt5Y2V54us5oiQ5Y2h54mHXG4gICAgICAgICAgc2VjdGlvbi5pdGVtcy5mb3JFYWNoKChpdGVtOiBhbnkpID0+IHtcbiAgICAgICAgICAgIG5ld1NlY3Rpb25zLnB1c2goe1xuICAgICAgICAgICAgICB0aXRsZTogaXRlbS5sYWJlbCxcbiAgICAgICAgICAgICAgaXRlbXM6IFt7IGxhYmVsOiBpdGVtLmxhYmVsLCB2YWx1ZTogaXRlbS52YWx1ZSB9XVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3U2VjdGlvbnMucHVzaChzZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXN1bHQuc2VjdGlvbnMgPSBuZXdTZWN0aW9ucztcbiAgICB9XG4gICAgcmVzdWx0Lm1ldGEgPSBtZXRhO1xuXG4gICAgLy8gbWV0YS50aXRsZTog5pyJ6ZO+5o6l55So5Y6f5paHdGl0bGXvvIzmma7pgJrpk77mjqXmipM8dGl0bGU+77yM5peg6ZO+5o6l55SoQUkgdGl0bGVcbiAgICBpZiAoaXNVcmwgJiYgY29udGVudC5pbmNsdWRlcygnbXAud2VpeGluLnFxLmNvbScpICYmIHRpdGxlKSB7XG4gICAgICByZXN1bHQubWV0YSA9IHsgLi4ubWV0YSwgdGl0bGUsIHVybDogY29udGVudCB9O1xuICAgIH0gZWxzZSBpZiAoaXNVcmwpIHtcbiAgICAgIGNvbnN0IHBhZ2VUaXRsZSA9IGF3YWl0IGV4dHJhY3RQYWdlVGl0bGUoY29udGVudCk7XG4gICAgICByZXN1bHQubWV0YSA9IHsgLi4ubWV0YSwgdGl0bGU6IHBhZ2VUaXRsZSB8fCByZXN1bHQudGl0bGUsIHVybDogY29udGVudCB9O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQubWV0YSA9IHsgLi4ubWV0YSwgdGl0bGU6IHJlc3VsdC50aXRsZSwgdXJsOiAnJyB9O1xuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihyZXN1bHQpO1xuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgcHJvY2Vzc2luZyBjb250ZW50OicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IFxuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCAn5aSE55CG5YaF5a655pe25Ye66ZSZJyxcbiAgICAgICAgZGV0YWlsczogZXJyb3IuY2F1c2U/Lm1lc3NhZ2UgfHwgZXJyb3IuY29kZSB8fCAn5pyq55+l6ZSZ6K+vJ1xuICAgICAgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn0gIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImNoZWVyaW8iLCJleHRyYWN0V2VjaGF0Q29udGVudCIsInVybCIsInJlc3BvbnNlIiwiZmV0Y2giLCJoZWFkZXJzIiwib2siLCJFcnJvciIsImh0bWwiLCJ0ZXh0IiwiJCIsImxvYWQiLCJ0aXRsZSIsInRyaW0iLCJhdXRob3IiLCJmaXJzdCIsImNvbnRlbnQiLCJyZXBsYWNlIiwiY29uc29sZSIsImxvZyIsInJhd0NvbnRlbnQiLCJlcnJvciIsImNhbGxLaW1pQVBJIiwic3lzdGVtUHJvbXB0IiwibGltaXRlZENvbnRlbnQiLCJsZW5ndGgiLCJzbGljZSIsIm1ldGhvZCIsInByb2Nlc3MiLCJlbnYiLCJLSU1JX0FQSV9LRVkiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIm1vZGVsIiwibWVzc2FnZXMiLCJyb2xlIiwidGVtcGVyYXR1cmUiLCJlcnJvclRleHQiLCJkYXRhIiwianNvbiIsImNob2ljZXMiLCJtZXNzYWdlIiwiZSIsInJldHJ5V2l0aEJhY2tvZmYiLCJmbiIsInJldHJpZXMiLCJkZWxheSIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsImV4dHJhY3RQYWdlVGl0bGUiLCJtYXRjaCIsIlBPU1QiLCJyZXF1ZXN0IiwiaXNVcmwiLCJzdGF0dXMiLCJwcm9jZXNzZWRDb250ZW50IiwiaW5jbHVkZXMiLCJleHRyYWN0ZWQiLCJjb21wbGV0aW9uIiwiY29kZSIsImZpeGVkIiwicmVzdWx0IiwicGFyc2UiLCJyYXciLCJzdWJ0aXRsZSIsIkFycmF5IiwiaXNBcnJheSIsImNvcmVOdW1iZXJzIiwibWFwIiwibiIsIm51bWJlciIsInRvU3RyaW5nIiwiZGVzYyIsInNlY3Rpb25zIiwic2VjdGlvbiIsIm5ld1NlY3Rpb24iLCJpdGVtcyIsIml0ZW0iLCJsYWJlbCIsInZhbHVlIiwiY3RhIiwibWV0YUtleXMiLCJtZXRhIiwibmV3U2VjdGlvbnMiLCJmb3JFYWNoIiwicHVzaCIsInBhZ2VUaXRsZSIsImRldGFpbHMiLCJjYXVzZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/process/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/cheerio","vendor-chunks/iconv-lite","vendor-chunks/parse5","vendor-chunks/css-select","vendor-chunks/entities","vendor-chunks/domutils","vendor-chunks/whatwg-mimetype","vendor-chunks/nth-check","vendor-chunks/htmlparser2","vendor-chunks/cheerio-select","vendor-chunks/whatwg-encoding","vendor-chunks/encoding-sniffer","vendor-chunks/domhandler","vendor-chunks/dom-serializer","vendor-chunks/css-what","vendor-chunks/parse5-parser-stream","vendor-chunks/parse5-htmlparser2-tree-adapter","vendor-chunks/domelementtype","vendor-chunks/safer-buffer","vendor-chunks/boolbase"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprocess%2Froute&page=%2Fapi%2Fprocess%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprocess%2Froute.ts&appDir=%2FUsers%2Famylixing%2FDocuments%2FGitHub%2FBento%20Grid%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Famylixing%2FDocuments%2FGitHub%2FBento%20Grid&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();